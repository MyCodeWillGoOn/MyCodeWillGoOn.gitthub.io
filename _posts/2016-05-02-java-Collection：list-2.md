---
layout: post
title:  "JAVA集合List、Set、Map功能与源码分析（1）"
date:  2016-05-02
categories: JAVA
---

TreeSet、HashSet(LinkedHashSet)；TreeMap、HashMap(LinkedHashMap)、HashTable

---

- 目录
{:toc}

### Java集合类-概述

- 集合相对于数组优点：可变长
![collection](/images/java-collection.png)

### TreeSet 与TreeMap

#### 红黑树

##### 二叉排序树(BST树)

- 二叉排序树又叫二叉查找树（BSTBinary Sort Tree）

1. 所有非叶子结点至多拥有两个儿子（Left和Right）；
2. 所有结点存储一个关键字
3. 左小右大：`左 < 中 < 右`,***BST的中序遍历必定是严格递增的***
4. 二叉排序树各项操作的平均时间复杂度为O(logn),但是最坏情况下，二叉排序树会退化成单链表,复杂度为O(n)

- BST树的搜索，从根结点开始，如果查询关键字比结点关键字小，就进入左儿子；如果比结点关键字大，就进入右儿子；如果左儿子或右儿子的指针为空，则报告找不到相应的关键字；
- 如果BST树的所有非叶子结点的左右子树的结点数目均保持差不多（平衡），那么B树的搜索性能逼近二分查找；但它比连续内存空间的二分查找的优点是，改变BST树结构（插入与删除结点）不需要移动大段的内存数据，甚至通常是常数开销.

##### 平衡二叉查找树（AVL树）
1. 是二BST树,左小右大
2. 左右子树深度之差的绝对值不超过1
3. 左右子树仍然为平衡二叉树
- 平衡因子BF=左子树深度－右子树深度 (平衡因子只能是1，0，-1)]

##### 红黑树（RB树）

- AVL是严格平衡树，因此在增加或者删除节点的时候，根据不同情况，旋转的次数比红黑树要多；
- 红黑是`弱平衡`的，用非严格的平衡来换取增删节点时候旋转次数的降低;
- 红黑树与AVL树的查询和更新的时间复杂度为`均为O(logn)`

- 搜索的次数远大于插入和删除，那么选择AVL树
- 如果搜索，插入删除次数几乎差不多，应该选择红黑树（RB树）

- 红黑树：含五个域，color，key，left，right，p
- 红黑树满足五条性质：
> 1. 每个结点要么是红的，要么是黑的。
> 2. 根结点是黑的
> 3 每个叶结点，即空结点（NIL）是黑的
> 4 若一个结点为红色，则其子结点为黑色
> 5 每个叶结点到根结点的路径中黑色结点的数目一致（黑高度相同）


### HashSet 与 HashMap/HashTable



